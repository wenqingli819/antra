for migration, we need three pacakges:

1. EntityFrameworkCore.SqlServer
2. EntityFrameworkCore.Tools
3. EntityFrameworkCore    



### What are migrations?

1. migrations are files generated by EF Core based on your models
2. migrations keep the models and the database in sync
3. edit the database without losing data
4. can roll back
5. version control for your database



### Run migration 

against where we create our `DbContext` class, e.g., Infrastructure

![image-20210331115252398](../../../../resources/image-20210331115252398.png)

`Add-Migration  xxx`

 // **remove** an unapplied migration 

`Remove-Migration`    // don't delete manually. use code first approach



//**remove** an applied migration, updated to db

![image-20210402215428326](../../../../resources/image-20210402215428326.png)

1. do an update with the migration version name we want. 
2. remember to also  `Remove-Migration`   the unwanted migration



`update-database`





### check migration

don't do changes in the migration file

```c#
// 2 methods
Up{}    // running a migration 
 
Down{}  //reverting a migration, rollback
```

scenario: added annotation, and add one more migrate to db to update the column info

![image-20210401210625969](../../../../resources/image-20210401210625969.png)



fluentAPI

![image-20210331115939627](../../../../resources/image-20210331115939627.png)



